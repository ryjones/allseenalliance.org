<!DOCTYPE html>
<!--[if IEMobile 7]><html class="iem7" lang="en" dir="ltr"><![endif]-->
<!--[if lte IE 6]><html class="lt-ie9 lt-ie8 lt-ie7" lang="en" dir="ltr"><![endif]-->
<!--[if (IE 7)&(!IEMobile)]><html class="lt-ie9 lt-ie8" lang="en" dir="ltr"><![endif]-->
<!--[if IE 8]><html class="lt-ie9" lang="en" dir="ltr"><![endif]-->
<!--[if (gte IE 9)|(gt IEMobile 7)]><!--><html lang="en" dir="ltr"
  xmlns:content="http://purl.org/rss/1.0/modules/content/"
  xmlns:dc="http://purl.org/dc/terms/"
  xmlns:foaf="http://xmlns.com/foaf/0.1/"
  xmlns:og="http://ogp.me/ns#"
  xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#"
  xmlns:sioc="http://rdfs.org/sioc/ns#"
  xmlns:sioct="http://rdfs.org/sioc/types#"
  xmlns:skos="http://www.w3.org/2004/02/skos/core#"
  xmlns:xsd="http://www.w3.org/2001/XMLSchema#"><!--<![endif]-->
<head>
<meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible" />
<meta charset="utf-8" />
<link rel="shortlink" href="/node/4468" />
<link rel="shortcut icon" href="https://identity.allseenalliance.org/sites/all/themes/at_alljoyn/favicon.ico" type="image/vnd.microsoft.icon" />
<meta name="Generator" content="Drupal 7 (http://drupal.org)" />
<link rel="canonical" href="/developers/develop/api-guide/audio-streaming/cpp" />
<meta name="viewport" content="width=device-width" />
<meta name="MobileOptimized" content="width" />
<meta name="HandheldFriendly" content="true" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta property="og:image" content="https://identity.allseenalliance.org/sites/all/themes/at_alljoyn/images/allseen-logo.png"/>
<meta name="google-translate-customization" content="48b015afeed82101-ecae534af0f48252-ga0b6470a6208b2f5-f"></meta>
<meta name="MobileOptimized" content="width">
<meta name="HandheldFriendly" content="true">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Audio API Usage Guide - C++ - AllSeen Alliance</title>
<link type="text/css" rel="stylesheet" href="https://identity.allseenalliance.org/sites/default/files/css/css_xE-rWrJf-fncB6ztZfd2huxqgxu4WO-qwma6Xer30m4.css" media="all" />
<link type="text/css" rel="stylesheet" href="https://identity.allseenalliance.org/sites/default/files/css/css_7Vcu6qIuRTO46aDOBZp7_mtksGdhCHSe0pjTO2YbGng.css" media="all" />
<link type="text/css" rel="stylesheet" href="https://identity.allseenalliance.org/sites/default/files/css/css_J2n1xiaSuececTK0yC3DT_Msm4PrkPwHizxr0oXGGoo.css" media="all" />
<link type="text/css" rel="stylesheet" href="https://identity.allseenalliance.org/sites/default/files/css/css_oxEtvjMfj8c8EEJJ-1WXLGGntCnC0UvrbYsq0Gw4m4Q.css" media="screen" />
<link type="text/css" rel="stylesheet" href="https://identity.allseenalliance.org/sites/default/files/css/css_9EusV9fcbkpqBeTGdJPl7ru65jm-3ngbTi_D6YRR_5A.css" media="only screen" />
<script src="https://identity.allseenalliance.org/sites/default/files/js/js_UWQINlriydSoeSiGQxToOUdv493zEa7dpsXC1OtYlZU.js"></script>
<script src="https://identity.allseenalliance.org/sites/default/files/js/js_COMsmDyrY9mzVU28X2uGvF4Ba3vd5eTo5xEO7dvCUZM.js"></script>
<script src="https://identity.allseenalliance.org/sites/default/files/js/js_i8oyg1R4On_HyzPiZ5zC3V-DxehjGAcpKwNao5s0s5I.js"></script>
<script>hljs.configure({languages:[]}); hljs.initHighlightingOnLoad();</script>
<script src="https://identity.allseenalliance.org/sites/default/files/js/js_aG0kZAhSHT6G3QC-d9Wwx9gQp5d0em8X6FmMYZ1e5h4.js"></script>
<script>var _gaq = _gaq || [];_gaq.push(["_setAccount", "UA-"]);_gaq.push(["_trackPageview"]);(function() {var ga = document.createElement("script");ga.type = "text/javascript";ga.async = true;ga.src = ("https:" == document.location.protocol ? "https://ssl" : "http://www") + ".google-analytics.com/ga.js";var s = document.getElementsByTagName("script")[0];s.parentNode.insertBefore(ga, s);})();</script>
<script src="https://identity.allseenalliance.org/sites/default/files/js/js_R35PAK16384fXh7f2OqvXVkbbrwr8ABLrDpR1zTluo0.js"></script>
<script src="https://identity.allseenalliance.org/sites/default/files/js/js_DKtRHJS-jz_cHgf23K7wnIWphCanZ_Rz74Aw-DKQyFs.js"></script>
<script>jQuery.extend(Drupal.settings, {"basePath":"\/","pathPrefix":"","ajaxPageState":{"theme":"at_alljoyn","theme_token":"oQ-E8y4ock7frBC-GxbXCn-FGbrziT2alyghFTqmNvM","js":{"misc\/jquery.js":1,"misc\/jquery.once.js":1,"misc\/drupal.js":1,"sites\/all\/modules\/contrib\/comment_notify\/comment_notify.js":1,"sites\/all\/modules\/alljoyn\/custom_modules\/allseen_docs\/allseen_docs_highlight\/highlightjs\/highlight.min.js":1,"0":1,"sites\/all\/libraries\/colorbox\/jquery.colorbox-min.js":1,"sites\/all\/modules\/contrib\/colorbox\/js\/colorbox.js":1,"sites\/all\/modules\/contrib\/colorbox\/styles\/default\/colorbox_style.js":1,"sites\/all\/modules\/contrib\/colorbox\/js\/colorbox_load.js":1,"sites\/all\/modules\/contrib\/colorbox\/js\/colorbox_inline.js":1,"sites\/all\/modules\/contrib\/panels\/js\/panels.js":1,"sites\/all\/modules\/contrib\/quote\/quote.js":1,"sites\/all\/modules\/contrib\/views_slideshow\/js\/views_slideshow.js":1,"sites\/all\/modules\/contrib\/google_analytics\/googleanalytics.js":1,"1":1,"sites\/all\/modules\/alljoyn\/custom_modules\/allseen_docs\/allseen_docs_nav\/allseen-docs-nav.js":1,"sites\/all\/themes\/at_alljoyn\/scripts\/alljoyn.js":1},"css":{"modules\/system\/system.base.css":1,"modules\/system\/system.menus.css":1,"modules\/system\/system.messages.css":1,"modules\/system\/system.theme.css":1,"sites\/all\/modules\/contrib\/comment_notify\/comment_notify.css":1,"sites\/all\/modules\/ldap\/ldap_user\/ldap_user.css":1,"modules\/book\/book.css":1,"modules\/comment\/comment.css":1,"sites\/all\/modules\/contrib\/date\/date_api\/date.css":1,"sites\/all\/modules\/contrib\/date\/date_popup\/themes\/datepicker.1.7.css":1,"modules\/field\/theme\/field.css":1,"sites\/all\/modules\/contrib\/mollom\/mollom.css":1,"modules\/node\/node.css":1,"modules\/user\/user.css":1,"modules\/forum\/forum.css":1,"sites\/all\/modules\/contrib\/views\/css\/views.css":1,"sites\/all\/modules\/alljoyn\/custom_modules\/allseen_docs\/allseen_docs_highlight\/highlightjs\/default.min.css":1,"sites\/all\/modules\/contrib\/colorbox\/styles\/default\/colorbox_style.css":1,"sites\/all\/modules\/contrib\/ctools\/css\/ctools.css":1,"sites\/all\/modules\/ldap\/ldap_servers\/ldap_servers.admin.css":1,"sites\/all\/modules\/contrib\/panels\/css\/panels.css":1,"sites\/all\/modules\/contrib\/quote\/quote.css":1,"sites\/all\/modules\/contrib\/views_slideshow\/views_slideshow.css":1,"sites\/all\/modules\/alljoyn\/custom_modules\/allseen_docs\/allseen_docs_nav\/allseen-docs-nav.css":1,"sites\/all\/modules\/alljoyn\/features\/content_type_developer_document\/content-type-developer-document.css":1,"sites\/all\/themes\/adaptivetheme\/at_core\/css\/at.layout.css":1,"sites\/all\/themes\/at_alljoyn\/css\/fonts.css":1,"sites\/all\/themes\/at_alljoyn\/css\/globals.css":1,"sites\/all\/themes\/at_alljoyn\/css\/jcarousel-alljoyn.css":1,"public:\/\/adaptivetheme\/at_alljoyn_files_7dbe1ef5\/at_alljoyn.responsive.layout.css":1,"public:\/\/adaptivetheme\/at_alljoyn_files_7dbe1ef5\/at_alljoyn.responsive.styles.css":1}},"colorbox":{"opacity":"0.85","current":"{current} of {total}","previous":"\u00ab Prev","next":"Next \u00bb","close":"Close","maxWidth":"98%","maxHeight":"98%","fixed":true,"mobiledetect":true,"mobiledevicewidth":"480px"},"jcarousel":{"ajaxPath":"\/jcarousel\/ajax\/views"},"quote_nest":2,"googleanalytics":{"trackOutbound":1,"trackMailto":1,"trackDownload":1,"trackDownloadExtensions":"7z|aac|arc|arj|asf|asx|avi|bin|csv|doc|exe|flv|gif|gz|gzip|hqx|jar|jpe?g|js|mp(2|3|4|e?g)|mov(ie)?|msi|msp|pdf|phps|png|ppt|qtm?|ra(m|r)?|sea|sit|tar|tgz|torrent|txt|wav|wma|wmv|wpd|xls|xml|z|zip"}});</script>
<!--[if lt IE 9]>
<script src="https://identity.allseenalliance.org/sites/all/themes/adaptivetheme/at_core/scripts/respond.js?nwgww1"></script>
<script src="https://identity.allseenalliance.org/sites/all/themes/adaptivetheme/at_core/scripts/html5.js?nwgww1"></script>
<script src="https://identity.allseenalliance.org/sites/all/themes/adaptivetheme/at_core/scripts/PIE.htc?nwgww1"></script>
<script src="https://identity.allseenalliance.org/sites/all/themes/adaptivetheme/at_core/scripts/selectivizr.js?nwgww1"></script>
<![endif]-->
</head>
<body class="html not-front not-logged-in one-sidebar sidebar-first page-node page-node- page-node-4468 node-type-developer-document site-name-hidden with-subnav page-developers-develop-api-guide-audio-streaming-cpp section-developers">
  <div id="body-top">
      </div>
  <div id="skip-link">
    <a href="#main-content" class="element-invisible element-focusable">Skip to main content</a>
  </div>
  <div class="region region-page-top"><div class="region-inner clearfix"><div id="fb-root"></div><script type="text/javascript">
     window.fbAsyncInit = function() {
       FB.init({
         appId: "492099574180957",
         status: true,
         cookie: true,
         xfbml: true,
         oauth : true,
         channelUrl: "https:\/\/identity.allseenalliance.org\/service_links\/channel"
         });

         FB.Event.subscribe('edge.create', function(href, widget) {
    _gaq.push(['_trackEvent', 'facebook', 'Facebook like', href]);
   });FB.Event.subscribe('edge.remove', function(href, widget) {
    _gaq.push(['_trackEvent', 'facebook', 'Facebook unlike', href]);
   });
       };
       (function(d){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = '//connect.facebook.net/en_US/all.js';
     ref.parentNode.insertBefore(js, ref);
   }(document));
    </script></div></div>  
<div id="wrap">

  <div id="lfcollabprojects-header">
    <div class="gray-diagonal">
      <div class="header-inner">
        <a id="lfcollabprojects-logo" href="http://collabprojects.linuxfoundation.org">Linux Foundation Collaborative Projects</a>
      </div>
    </div>
  </div>

  <div id="page" class="container page">

    
    <header id="header" class="clearfix" role="banner">

      <div class="region region-header"><div class="region-inner clearfix"><div id="block-block-19" class="block block-block" ><div class="block-inner clearfix">        <div class="block-content content"><br /><br /><br /><br /><br /><br /><br /></div></div></div></div></div>
              <div id="branding" class="branding-elements clearfix">

                      <div id="logo"><a href="/" title="Home page"><img class="site-logo" typeof="foaf:Image" src="https://identity.allseenalliance.org/sites/default/files/logo.png" alt="AllSeen Alliance" /></a></div>
          
                      <hgroup id="name-and-slogan" class="element-invisible">
                              <h1 id="site-name" class="element-invisible"><a href="/" title="Home page">AllSeen Alliance</a></h1>
                                        </hgroup>
          
          <!--main menu-->
          <a id="main-menu-toggle" href="#">Site Sections</a>
  		  		  		
        </div>
      
    </header>


    <div id="columns" class="clearfix">
      <div id="sub-menu-bar">
        <div class="region region-sub-menu-bar"><div class="region-inner clearfix"><div id="block-menu-block-allseen-docs-nav" class="block block-menu-block"  role="navigation"><div class="block-inner clearfix">        <div class="block-content content"><div class="menu-block-wrapper menu-block-allseen-docs-nav menu-name-main-menu parent-mlid-0 menu-level-2">
  <ul class="menu clearfix"><li class="first has-children menu-mlid-2504 menu-item-2504"><a href="/developers/learn">Learn</a></li><li class="has-children menu-mlid-2539 menu-item-2539"><a href="/developers/download">Download</a></li><li class="has-children active-trail menu-mlid-2541 menu-item-2541"><a href="/developers/develop" class="active-trail">Develop</a></li><li class="last has-children menu-mlid-2636 menu-item-2636"><a href="/developers/contribute">Contribute</a></li></ul></div>
</div></div></div><section id="block-menu-block-allseen-docs-responsive-nav" class="block block-menu-block"  role="navigation"><div class="block-inner clearfix">        <div class="block-title-wrapper">
      <h2 class="block-title">Menu</h2>
    </div>
      <div class="block-content content"><div class="menu-block-wrapper menu-block-allseen-docs-responsive-nav menu-name-main-menu parent-mlid-0 menu-level-1">
  <ul class="menu clearfix"><li class="first menu-parent menu-mlid-1994 menu-item-1994"><a href="/about">About</a><ul class="menu clearfix"><li class="first menu-mlid-2486 menu-item-2486"><a href="/about/why-allseen">Why AllSeen</a></li><li class="menu-mlid-2464 menu-item-2464"><a href="/about/get-involved">Get Involved</a></li><li class="collapsed menu-mlid-2446 menu-item-2446"><a href="/about/governance/ip-policy">IP Policy</a></li><li class="menu-mlid-2491 menu-item-2491"><a href="/about/working-groups">Working Groups</a></li><li class="menu-mlid-2286 menu-item-2286"><a href="/about/members">Member Companies</a></li><li class="menu-mlid-2285 menu-item-2285"><a href="/about/join-allseen-alliance">Join The AllSeen Alliance</a></li><li class="collapsed menu-mlid-2447 menu-item-2447"><a href="/about/governance">Governance</a></li><li class="menu-mlid-501 menu-item-501"><a href="/about/faqs">FAQs</a></li><li class="menu-mlid-2322 menu-item-2322"><a href="/about/contact">Contact Us</a></li><li class="menu-mlid-2282 menu-item-2282"><a href="/allseen/what-is-allseen-alliance">What is AllSeen Alliance?</a></li><li class="last menu-mlid-2490 menu-item-2490"><a href="https://wiki.allseenalliance.org/members_private/start?do=login&amp;sectok=34485854163fe6a0be457198139e2c84" title="Members Area" id="members_area" name="Members Area" rel="nofollow" target="_blank">Members Area</a></li></ul></li><li class="menu-parent active-trail menu-mlid-2503 menu-item-2503"><a href="/developers" class="active-trail">Developers</a><ul class="menu clearfix"><li class="first menu-parent has-children menu-mlid-2504 menu-item-2504"><a href="/developers/learn">Learn</a><ul class="menu clearfix"><li class="first menu-mlid-2505 menu-item-2505"><a href="/developers/learn/use-cases">Use Cases</a></li><li class="menu-mlid-2506 menu-item-2506"><a href="/developers/learn/architecture">Architecture</a></li><li class="menu-parent menu-mlid-2507 menu-item-2507"><a href="/developers/learn/core">Core Framework</a><ul class="menu clearfix"><li class="first menu-parent menu-mlid-2508 menu-item-2508"><a href="/developers/learn/core/about-announcement">About Announcement</a><ul class="menu clearfix"><li class="first menu-mlid-2509 menu-item-2509"><a href="/developers/learn/core/about-announcement/interface">Interface</a></li><li class="last menu-mlid-2510 menu-item-2510"><a href="/developers/learn/core/about-announcement/interface-14-02">Interface 14.02</a></li></ul></li><li class="menu-mlid-2511 menu-item-2511"><a href="/developers/learn/core/events-and-actions">Events and Actions</a></li><li class="menu-mlid-2992 menu-item-2992"><a href="/developers/learn/core/rn_config">Routing Node Configuration</a></li><li class="menu-mlid-2512 menu-item-2512"><a href="/developers/learn/core/standard-core">Standard Core</a></li><li class="menu-mlid-2513 menu-item-2513"><a href="/developers/learn/core/thin-core">Thin Core</a></li><li class="menu-parent menu-mlid-2514 menu-item-2514"><a href="/developers/learn/core/system-description">System Description</a><ul class="menu clearfix"><li class="first menu-mlid-2515 menu-item-2515"><a href="/developers/learn/core/system-description/system-architecture">System Architecture</a></li><li class="menu-mlid-2516 menu-item-2516"><a href="/developers/learn/core/system-description/advertisement-discovery">Advertisement and Discovery</a></li><li class="menu-mlid-2645 menu-item-2645"><a href="/developers/learn/core/system-description/alljoyn-transport">AllJoyn Transport</a></li><li class="menu-mlid-2517 menu-item-2517"><a href="/developers/learn/core/system-description/data-exchange">Data Exchange</a></li><li class="menu-mlid-2518 menu-item-2518"><a href="/developers/learn/core/system-description/alljoyn-session">AllJoyn Session</a></li><li class="menu-mlid-2519 menu-item-2519"><a href="/developers/learn/core/system-description/sessionless-signal">Sessionless Signal</a></li><li class="menu-mlid-2520 menu-item-2520"><a href="/developers/learn/core/system-description/alljoyn-security">AllJoyn Security</a></li><li class="menu-mlid-2521 menu-item-2521"><a href="/developers/learn/core/system-description/thin-apps">Thin Apps</a></li><li class="last menu-mlid-2522 menu-item-2522"><a href="/developers/learn/core/system-description/events-actions">Events and Actions</a></li></ul></li><li class="last menu-parent menu-mlid-2937 menu-item-2937"><a href="/developers/learn/core/security2_0">Security 2.0</a><ul class="menu clearfix"><li class="first last menu-mlid-2938 menu-item-2938"><a href="/developers/learn/core/security2_0/hld">High-Level Design</a></li></ul></li></ul></li><li class="menu-parent menu-mlid-2523 menu-item-2523"><a href="/developers/learn/base-services">Base Services</a><ul class="menu clearfix"><li class="first menu-parent menu-mlid-2524 menu-item-2524"><a href="/developers/learn/base-services/onboarding">Onboarding</a><ul class="menu clearfix"><li class="first menu-mlid-2525 menu-item-2525"><a href="/developers/learn/base-services/onboarding/interface">Interface</a></li><li class="last menu-mlid-2526 menu-item-2526"><a href="/developers/learn/base-services/onboarding/interface-14-02">Interface 14.02</a></li></ul></li><li class="menu-parent menu-mlid-2527 menu-item-2527"><a href="/developers/learn/base-services/configuration">Configuration</a><ul class="menu clearfix"><li class="first menu-mlid-2528 menu-item-2528"><a href="/developers/learn/base-services/configuration/interface">Interface</a></li><li class="last menu-mlid-2529 menu-item-2529"><a href="/developers/learn/base-services/configuration/interface-14-02">Interface 14.02</a></li></ul></li><li class="menu-parent menu-mlid-2530 menu-item-2530"><a href="/developers/learn/base-services/notification">Notification</a><ul class="menu clearfix"><li class="first menu-mlid-2531 menu-item-2531"><a href="/developers/learn/base-services/notification/interface">Interface</a></li><li class="last menu-mlid-2532 menu-item-2532"><a href="/developers/learn/base-services/notification/interface-14-02">Interface 14.02</a></li></ul></li><li class="menu-parent menu-mlid-2533 menu-item-2533"><a href="/developers/learn/base-services/controlpanel">ControlPanel</a><ul class="menu clearfix"><li class="first menu-mlid-2534 menu-item-2534"><a href="/developers/learn/base-services/controlpanel/interface">Interface</a></li><li class="last menu-mlid-2535 menu-item-2535"><a href="/developers/learn/base-services/controlpanel/interface-14-02">Interface 14.02</a></li></ul></li><li class="last menu-parent menu-mlid-2536 menu-item-2536"><a href="/developers/learn/base-services/audiostreaming">Audio Streaming</a><ul class="menu clearfix"><li class="first last menu-mlid-2537 menu-item-2537"><a href="/developers/learn/base-services/audiostreaming/interface">Interface</a></li></ul></li></ul></li><li class="last menu-mlid-2538 menu-item-2538"><a href="/developers/learn/glossary">Glossary</a></li></ul></li><li class="menu-parent has-children menu-mlid-2539 menu-item-2539"><a href="/developers/download">Download</a><ul class="menu clearfix"><li class="first last menu-mlid-2540 menu-item-2540"><a href="/developers/download/supported-platforms">Supported Platforms</a></li></ul></li><li class="menu-parent has-children active-trail menu-mlid-2541 menu-item-2541"><a href="/developers/develop" class="active-trail active-trail">Develop</a><ul class="menu clearfix"><li class="first menu-parent menu-mlid-2542 menu-item-2542"><a href="/developers/develop/building">Building</a><ul class="menu clearfix"><li class="first menu-parent menu-mlid-2543 menu-item-2543"><a href="/developers/develop/building/android">Android</a><ul class="menu clearfix"><li class="first last menu-mlid-2544 menu-item-2544"><a href="/developers/develop/building/android/build-source">Build Source</a></li></ul></li><li class="menu-parent menu-mlid-2545 menu-item-2545"><a href="/developers/develop/building/linux">Linux</a><ul class="menu clearfix"><li class="first menu-mlid-2546 menu-item-2546"><a href="/developers/develop/building/linux/openwrt">OpenWRT</a></li><li class="last menu-mlid-2547 menu-item-2547"><a href="/developers/develop/building/linux/build-source">Build Source</a></li></ul></li><li class="menu-parent menu-mlid-2548 menu-item-2548"><a href="/developers/develop/building/ios-osx">iOS/OS X</a><ul class="menu clearfix"><li class="first last menu-mlid-2549 menu-item-2549"><a href="/developers/develop/building/ios-osx/build-source">Build Source</a></li></ul></li><li class="menu-parent menu-mlid-2550 menu-item-2550"><a href="/developers/develop/building/windows">Windows</a><ul class="menu clearfix"><li class="first last menu-mlid-2551 menu-item-2551"><a href="/developers/develop/building/windows/build-source">Build Source</a></li></ul></li><li class="menu-mlid-2552 menu-item-2552"><a href="/developers/develop/building/thin-linux">Thin - Linux</a></li><li class="menu-mlid-2553 menu-item-2553"><a href="/developers/develop/building/thin-windows">Thin - Windows</a></li><li class="last menu-mlid-2993 menu-item-2993"><a href="/developers/develop/building/alljoyn-js">AllJoyn.js</a></li></ul></li><li class="menu-parent menu-mlid-2554 menu-item-2554"><a href="/developers/develop/run-sample-apps">Running Samples</a><ul class="menu clearfix"><li class="first menu-parent menu-mlid-2555 menu-item-2555"><a href="/developers/develop/run-sample-apps/basic">Basic</a><ul class="menu clearfix"><li class="first menu-mlid-2556 menu-item-2556"><a href="/developers/develop/run-sample-apps/basic/android">Android</a></li><li class="menu-mlid-2557 menu-item-2557"><a href="/developers/develop/run-sample-apps/basic/linux">Linux</a></li><li class="menu-mlid-2558 menu-item-2558"><a href="/developers/develop/run-sample-apps/basic/ios-osx">iOS/OS X</a></li><li class="menu-mlid-2559 menu-item-2559"><a href="/developers/develop/run-sample-apps/basic/windows">Windows</a></li><li class="menu-mlid-2560 menu-item-2560"><a href="/developers/develop/run-sample-apps/basic/thin-linux">Thin - Linux</a></li><li class="last menu-mlid-2561 menu-item-2561"><a href="/developers/develop/run-sample-apps/basic/thin-windows">Thin - Windows</a></li></ul></li><li class="menu-parent menu-mlid-2562 menu-item-2562"><a href="/developers/develop/run-sample-apps/chat">Chat</a><ul class="menu clearfix"><li class="first menu-mlid-2563 menu-item-2563"><a href="/developers/develop/run-sample-apps/chat/android">Android</a></li><li class="menu-mlid-2564 menu-item-2564"><a href="/developers/develop/run-sample-apps/chat/linux">Linux</a></li><li class="menu-mlid-2565 menu-item-2565"><a href="/developers/develop/run-sample-apps/chat/ios-osx">iOS/OS X</a></li><li class="menu-mlid-2566 menu-item-2566"><a href="/developers/develop/run-sample-apps/chat/windows">Windows</a></li><li class="last menu-mlid-2567 menu-item-2567"><a href="/developers/develop/run-sample-apps/chat/thin-linux">Thin - Linux</a></li></ul></li><li class="menu-parent menu-mlid-2568 menu-item-2568"><a href="/developers/develop/run-sample-apps/about">About</a><ul class="menu clearfix"><li class="first menu-mlid-2569 menu-item-2569"><a href="/developers/develop/run-sample-apps/about/linux">Linux</a></li><li class="menu-mlid-2570 menu-item-2570"><a href="/developers/develop/run-sample-apps/about/ios-osx">iOS/OS X</a></li><li class="last menu-mlid-2646 menu-item-2646"><a href="/developers/develop/run-sample-apps/about/windows">Windows</a></li></ul></li><li class="menu-mlid-2934 menu-item-2934"><a href="/developers/develop/run-sample-apps/observer">Observer</a></li><li class="menu-parent menu-mlid-2571 menu-item-2571"><a href="/developers/develop/run-sample-apps/config">Config</a><ul class="menu clearfix"><li class="first menu-mlid-2572 menu-item-2572"><a href="/developers/develop/run-sample-apps/config/android">Android</a></li><li class="menu-mlid-2573 menu-item-2573"><a href="/developers/develop/run-sample-apps/config/linux">Linux</a></li><li class="menu-mlid-2574 menu-item-2574"><a href="/developers/develop/run-sample-apps/config/ios-osx">iOS/OS X</a></li><li class="last menu-mlid-2575 menu-item-2575"><a href="/developers/develop/run-sample-apps/config/thin-linux">Thin - Linux</a></li></ul></li><li class="menu-parent menu-mlid-2576 menu-item-2576"><a href="/developers/develop/run-sample-apps/controlpanel">Control Panel</a><ul class="menu clearfix"><li class="first menu-mlid-2577 menu-item-2577"><a href="/developers/develop/run-sample-apps/controlpanel/android">Android</a></li><li class="menu-mlid-2578 menu-item-2578"><a href="/developers/develop/run-sample-apps/controlpanel/linux">Linux</a></li><li class="menu-mlid-2579 menu-item-2579"><a href="/developers/develop/run-sample-apps/controlpanel/ios-osx">iOS/OS X</a></li><li class="last menu-mlid-2580 menu-item-2580"><a href="/developers/develop/run-sample-apps/controlpanel/thin-linux">Thin - Linux</a></li></ul></li><li class="menu-parent menu-mlid-2581 menu-item-2581"><a href="/developers/develop/run-sample-apps/notification">Notification</a><ul class="menu clearfix"><li class="first menu-mlid-2582 menu-item-2582"><a href="/developers/develop/run-sample-apps/notification/android">Android</a></li><li class="menu-mlid-2583 menu-item-2583"><a href="/developers/develop/run-sample-apps/notification/linux">Linux</a></li><li class="menu-mlid-2584 menu-item-2584"><a href="/developers/develop/run-sample-apps/notification/ios-osx">iOS/OS X</a></li><li class="last menu-mlid-2585 menu-item-2585"><a href="/developers/develop/run-sample-apps/notification/thin-linux">Thin - Linux</a></li></ul></li><li class="menu-parent menu-mlid-2586 menu-item-2586"><a href="/developers/develop/run-sample-apps/onboarding">Onboarding</a><ul class="menu clearfix"><li class="first menu-mlid-2587 menu-item-2587"><a href="/developers/develop/run-sample-apps/onboarding/android">Android</a></li><li class="menu-mlid-2588 menu-item-2588"><a href="/developers/develop/run-sample-apps/onboarding/linux">Linux</a></li><li class="last menu-mlid-2589 menu-item-2589"><a href="/developers/develop/run-sample-apps/onboarding/ios-osx">iOS/OS X</a></li></ul></li><li class="menu-parent menu-mlid-2590 menu-item-2590"><a href="/developers/develop/run-sample-apps/acserver">AC Server</a><ul class="menu clearfix"><li class="first menu-mlid-2591 menu-item-2591"><a href="/developers/develop/run-sample-apps/acserver/linux">Linux</a></li><li class="last menu-mlid-2592 menu-item-2592"><a href="/developers/develop/run-sample-apps/acserver/thin-linux">Thin - Linux</a></li></ul></li><li class="menu-parent menu-mlid-2593 menu-item-2593"><a href="/developers/develop/run-sample-apps/test">Command Line Apps</a><ul class="menu clearfix"><li class="first last menu-mlid-2594 menu-item-2594"><a href="/developers/develop/run-sample-apps/test/sessions">Sessions</a></li></ul></li><li class="last menu-mlid-2994 menu-item-2994"><a href="/developers/develop/run-sample-apps/alljoyn-js">AllJoyn.js</a></li></ul></li><li class="menu-parent active-trail menu-mlid-2595 menu-item-2595"><a href="/developers/develop/api-guide" class="active-trail">API Guide</a><ul class="menu clearfix"><li class="first menu-parent menu-mlid-2596 menu-item-2596"><a href="/developers/develop/api-guide/core">Core</a><ul class="menu clearfix"><li class="first menu-mlid-2939 menu-item-2939"><a href="/developers/develop/api-guide/core/java">java</a></li><li class="menu-mlid-2940 menu-item-2940"><a href="/developers/develop/api-guide/core/objc">Objective-C</a></li><li class="menu-mlid-2647 menu-item-2647"><a href="/developers/develop/api-guide/core/alljoyn-transports-best-practices">Alljoyn Transports Best Practices</a></li><li class="menu-mlid-2648 menu-item-2648"><a href="/developers/develop/api-guide/core/auto-ping">AutoPinger</a></li><li class="menu-mlid-2935 menu-item-2935"><a href="/developers/develop/api-guide/core/observer">Observer</a></li><li class="last menu-mlid-2936 menu-item-2936"><a href="/developers/develop/api-guide/core/propcache">Property Cache</a></li></ul></li><li class="menu-parent menu-mlid-2599 menu-item-2599"><a href="/developers/develop/api-guide/about">About</a><ul class="menu clearfix"><li class="first menu-mlid-2941 menu-item-2941"><a href="/developers/develop/api-guide/about/java">java</a></li><li class="menu-mlid-2942 menu-item-2942"><a href="/developers/develop/api-guide/about/cpp">C++</a></li><li class="menu-mlid-2943 menu-item-2943"><a href="/developers/develop/api-guide/about/objc">Objective-C</a></li><li class="menu-mlid-2944 menu-item-2944"><a href="/developers/develop/api-guide/about/c-thin">C (Thin Core)</a></li><li class="menu-mlid-2945 menu-item-2945"><a href="/developers/develop/api-guide/about/java-legacy">java Legacy</a></li><li class="menu-mlid-2946 menu-item-2946"><a href="/developers/develop/api-guide/about/cpp-legacy">C++ Legacy</a></li><li class="last menu-mlid-2947 menu-item-2947"><a href="/developers/develop/api-guide/about/objc-legacy">Objective-C Legacy</a></li></ul></li><li class="menu-parent menu-mlid-2604 menu-item-2604"><a href="/developers/develop/api-guide/onboarding">Onboarding</a><ul class="menu clearfix"><li class="first menu-mlid-2948 menu-item-2948"><a href="/developers/develop/api-guide/onboarding/java">java</a></li><li class="last menu-mlid-2949 menu-item-2949"><a href="/developers/develop/api-guide/onboarding/objc">Objective-C</a></li></ul></li><li class="menu-parent menu-mlid-2607 menu-item-2607"><a href="/developers/develop/api-guide/config">Configuration</a><ul class="menu clearfix"><li class="first menu-mlid-2950 menu-item-2950"><a href="/developers/develop/api-guide/config/java">java</a></li><li class="menu-mlid-2951 menu-item-2951"><a href="/developers/develop/api-guide/config/cpp">C++</a></li><li class="menu-mlid-2952 menu-item-2952"><a href="/developers/develop/api-guide/config/objc">Objective-C</a></li><li class="last menu-mlid-2953 menu-item-2953"><a href="/developers/develop/api-guide/config/c-thin">C (Thin Core)</a></li></ul></li><li class="menu-parent menu-mlid-2612 menu-item-2612"><a href="/developers/develop/api-guide/notification">Notification</a><ul class="menu clearfix"><li class="first menu-mlid-2954 menu-item-2954"><a href="/developers/develop/api-guide/notification/java">java</a></li><li class="menu-mlid-2955 menu-item-2955"><a href="/developers/develop/api-guide/notification/cpp">C++</a></li><li class="menu-mlid-2956 menu-item-2956"><a href="/developers/develop/api-guide/notification/objc">Objective-C</a></li><li class="last menu-mlid-2957 menu-item-2957"><a href="/developers/develop/api-guide/notification/c-thin">C (Thin Core)</a></li></ul></li><li class="menu-parent menu-mlid-2617 menu-item-2617"><a href="/developers/develop/api-guide/controlpanel">Control Panel</a><ul class="menu clearfix"><li class="first menu-mlid-2958 menu-item-2958"><a href="/developers/develop/api-guide/controlpanel/java">java</a></li><li class="menu-mlid-2959 menu-item-2959"><a href="/developers/develop/api-guide/controlpanel/cpp">C++</a></li><li class="menu-mlid-2960 menu-item-2960"><a href="/developers/develop/api-guide/controlpanel/objc">Objective-C</a></li><li class="last menu-mlid-2961 menu-item-2961"><a href="/developers/develop/api-guide/controlpanel/c-thin">C (Thin Core)</a></li></ul></li><li class="menu-parent active-trail menu-mlid-2622 menu-item-2622"><a href="/developers/develop/api-guide/audio-streaming" class="active-trail">Audio Streaming</a><ul class="menu clearfix"><li class="first last active-trail active menu-mlid-2962 menu-item-2962"><a href="/developers/develop/api-guide/audio-streaming/cpp" class="active-trail active">C++</a></li></ul></li><li class="last menu-mlid-2624 menu-item-2624"><a href="/developers/develop/api-guide/events-and-actions">Events and Actions</a></li></ul></li><li class="menu-mlid-2625 menu-item-2625"><a href="/developers/develop/api-reference">API Reference</a></li><li class="menu-parent menu-mlid-2626 menu-item-2626"><a href="/developers/develop/debug">Debug</a><ul class="menu clearfix"><li class="first last menu-mlid-2627 menu-item-2627"><a href="/developers/develop/debug/common-issues">Common Issues</a></li></ul></li><li class="menu-parent menu-mlid-2628 menu-item-2628"><a href="/developers/develop/tutorial">Tutorial</a><ul class="menu clearfix"><li class="first menu-mlid-2629 menu-item-2629"><a href="/developers/develop/tutorial/core">Core</a></li><li class="menu-mlid-2630 menu-item-2630"><a href="/developers/develop/tutorial/ios">iOS</a></li><li class="menu-mlid-2631 menu-item-2631"><a href="/developers/develop/tutorial/thin-app">Thin App</a></li><li class="menu-mlid-2632 menu-item-2632"><a href="/developers/develop/tutorial/arduino-and-gt202">Arduino + GT202</a></li><li class="last menu-mlid-2633 menu-item-2633"><a href="/developers/develop/tutorial/videos">Videos</a></li></ul></li><li class="last menu-mlid-2634 menu-item-2634"><a href="/developers/develop/ask">Ask Forum</a></li></ul></li><li class="last menu-parent has-children menu-mlid-2636 menu-item-2636"><a href="/developers/contribute">Contribute</a><ul class="menu clearfix"><li class="first last menu-mlid-2637 menu-item-2637"><a href="/developers/contribute/project-lifecycle">Project Lifecycle</a></li></ul></li></ul></li><li class="menu-mlid-2466 menu-item-2466"><a href="/showcase-products-using-alljoyn">Showcase</a></li><li class="menu-parent menu-mlid-2487 menu-item-2487"><a href="/allseen-alliance-certification">Certification</a><ul class="menu clearfix"><li class="first menu-mlid-2488 menu-item-2488"><a href="/certification/how-validate-your-designed-allseen-product">How To Validate Your Product</a></li><li class="last menu-mlid-2489 menu-item-2489"><a href="/certification/faq">FAQ</a></li></ul></li><li class="last menu-parent menu-mlid-2421 menu-item-2421"><a href="/news-and-events">News &amp; Events</a><ul class="menu clearfix"><li class="first menu-mlid-2422 menu-item-2422"><a href="/news-and-events/newsroom/announcements">Announcements</a></li><li class="menu-mlid-2449 menu-item-2449"><a href="/news/videos">Videos</a></li><li class="menu-mlid-2423 menu-item-2423"><a href="/news-and-events/newsroom/in-the-news">In The News</a></li><li class="menu-mlid-2424 menu-item-2424"><a href="/news-and-events/events">Events</a></li><li class="menu-mlid-2448 menu-item-2448"><a href="/news-and-events/blogs">Blogs</a></li><li class="menu-mlid-2461 menu-item-2461"><a href="/news-and-events/newsletters">Newsletters</a></li><li class="last menu-mlid-2933 menu-item-2933"><a href="/news-and-events/videos">Videos</a></li></ul></li></ul></div>
</div></div></section></div></div>      </div>
            
      
      <div class="region region-sidebar-first sidebar"><div class="region-inner clearfix"><div id="block-menu-block-1" class="block block-menu-block"  role="navigation"><div class="block-inner clearfix">        <div class="block-content content"><div class="menu-block-wrapper menu-block-1 menu-name-main-menu parent-mlid-0 menu-level-3">
  <ul class="menu clearfix"><li class="first menu-parent menu-mlid-2542 menu-item-2542"><a href="/developers/develop/building">Building</a><ul class="menu clearfix"><li class="first menu-parent menu-mlid-2543 menu-item-2543"><a href="/developers/develop/building/android">Android</a><ul class="menu clearfix"><li class="first last menu-mlid-2544 menu-item-2544"><a href="/developers/develop/building/android/build-source">Build Source</a></li></ul></li><li class="menu-parent menu-mlid-2545 menu-item-2545"><a href="/developers/develop/building/linux">Linux</a><ul class="menu clearfix"><li class="first menu-mlid-2546 menu-item-2546"><a href="/developers/develop/building/linux/openwrt">OpenWRT</a></li><li class="last menu-mlid-2547 menu-item-2547"><a href="/developers/develop/building/linux/build-source">Build Source</a></li></ul></li><li class="menu-parent menu-mlid-2548 menu-item-2548"><a href="/developers/develop/building/ios-osx">iOS/OS X</a><ul class="menu clearfix"><li class="first last menu-mlid-2549 menu-item-2549"><a href="/developers/develop/building/ios-osx/build-source">Build Source</a></li></ul></li><li class="menu-parent menu-mlid-2550 menu-item-2550"><a href="/developers/develop/building/windows">Windows</a><ul class="menu clearfix"><li class="first last menu-mlid-2551 menu-item-2551"><a href="/developers/develop/building/windows/build-source">Build Source</a></li></ul></li><li class="menu-mlid-2552 menu-item-2552"><a href="/developers/develop/building/thin-linux">Thin - Linux</a></li><li class="menu-mlid-2553 menu-item-2553"><a href="/developers/develop/building/thin-windows">Thin - Windows</a></li><li class="last menu-mlid-2993 menu-item-2993"><a href="/developers/develop/building/alljoyn-js">AllJoyn.js</a></li></ul></li><li class="menu-parent menu-mlid-2554 menu-item-2554"><a href="/developers/develop/run-sample-apps">Running Samples</a><ul class="menu clearfix"><li class="first menu-parent menu-mlid-2555 menu-item-2555"><a href="/developers/develop/run-sample-apps/basic">Basic</a><ul class="menu clearfix"><li class="first menu-mlid-2556 menu-item-2556"><a href="/developers/develop/run-sample-apps/basic/android">Android</a></li><li class="menu-mlid-2557 menu-item-2557"><a href="/developers/develop/run-sample-apps/basic/linux">Linux</a></li><li class="menu-mlid-2558 menu-item-2558"><a href="/developers/develop/run-sample-apps/basic/ios-osx">iOS/OS X</a></li><li class="menu-mlid-2559 menu-item-2559"><a href="/developers/develop/run-sample-apps/basic/windows">Windows</a></li><li class="menu-mlid-2560 menu-item-2560"><a href="/developers/develop/run-sample-apps/basic/thin-linux">Thin - Linux</a></li><li class="last menu-mlid-2561 menu-item-2561"><a href="/developers/develop/run-sample-apps/basic/thin-windows">Thin - Windows</a></li></ul></li><li class="menu-parent menu-mlid-2562 menu-item-2562"><a href="/developers/develop/run-sample-apps/chat">Chat</a><ul class="menu clearfix"><li class="first menu-mlid-2563 menu-item-2563"><a href="/developers/develop/run-sample-apps/chat/android">Android</a></li><li class="menu-mlid-2564 menu-item-2564"><a href="/developers/develop/run-sample-apps/chat/linux">Linux</a></li><li class="menu-mlid-2565 menu-item-2565"><a href="/developers/develop/run-sample-apps/chat/ios-osx">iOS/OS X</a></li><li class="menu-mlid-2566 menu-item-2566"><a href="/developers/develop/run-sample-apps/chat/windows">Windows</a></li><li class="last menu-mlid-2567 menu-item-2567"><a href="/developers/develop/run-sample-apps/chat/thin-linux">Thin - Linux</a></li></ul></li><li class="menu-parent menu-mlid-2568 menu-item-2568"><a href="/developers/develop/run-sample-apps/about">About</a><ul class="menu clearfix"><li class="first menu-mlid-2569 menu-item-2569"><a href="/developers/develop/run-sample-apps/about/linux">Linux</a></li><li class="menu-mlid-2570 menu-item-2570"><a href="/developers/develop/run-sample-apps/about/ios-osx">iOS/OS X</a></li><li class="last menu-mlid-2646 menu-item-2646"><a href="/developers/develop/run-sample-apps/about/windows">Windows</a></li></ul></li><li class="menu-mlid-2934 menu-item-2934"><a href="/developers/develop/run-sample-apps/observer">Observer</a></li><li class="menu-parent menu-mlid-2571 menu-item-2571"><a href="/developers/develop/run-sample-apps/config">Config</a><ul class="menu clearfix"><li class="first menu-mlid-2572 menu-item-2572"><a href="/developers/develop/run-sample-apps/config/android">Android</a></li><li class="menu-mlid-2573 menu-item-2573"><a href="/developers/develop/run-sample-apps/config/linux">Linux</a></li><li class="menu-mlid-2574 menu-item-2574"><a href="/developers/develop/run-sample-apps/config/ios-osx">iOS/OS X</a></li><li class="last menu-mlid-2575 menu-item-2575"><a href="/developers/develop/run-sample-apps/config/thin-linux">Thin - Linux</a></li></ul></li><li class="menu-parent menu-mlid-2576 menu-item-2576"><a href="/developers/develop/run-sample-apps/controlpanel">Control Panel</a><ul class="menu clearfix"><li class="first menu-mlid-2577 menu-item-2577"><a href="/developers/develop/run-sample-apps/controlpanel/android">Android</a></li><li class="menu-mlid-2578 menu-item-2578"><a href="/developers/develop/run-sample-apps/controlpanel/linux">Linux</a></li><li class="menu-mlid-2579 menu-item-2579"><a href="/developers/develop/run-sample-apps/controlpanel/ios-osx">iOS/OS X</a></li><li class="last menu-mlid-2580 menu-item-2580"><a href="/developers/develop/run-sample-apps/controlpanel/thin-linux">Thin - Linux</a></li></ul></li><li class="menu-parent menu-mlid-2581 menu-item-2581"><a href="/developers/develop/run-sample-apps/notification">Notification</a><ul class="menu clearfix"><li class="first menu-mlid-2582 menu-item-2582"><a href="/developers/develop/run-sample-apps/notification/android">Android</a></li><li class="menu-mlid-2583 menu-item-2583"><a href="/developers/develop/run-sample-apps/notification/linux">Linux</a></li><li class="menu-mlid-2584 menu-item-2584"><a href="/developers/develop/run-sample-apps/notification/ios-osx">iOS/OS X</a></li><li class="last menu-mlid-2585 menu-item-2585"><a href="/developers/develop/run-sample-apps/notification/thin-linux">Thin - Linux</a></li></ul></li><li class="menu-parent menu-mlid-2586 menu-item-2586"><a href="/developers/develop/run-sample-apps/onboarding">Onboarding</a><ul class="menu clearfix"><li class="first menu-mlid-2587 menu-item-2587"><a href="/developers/develop/run-sample-apps/onboarding/android">Android</a></li><li class="menu-mlid-2588 menu-item-2588"><a href="/developers/develop/run-sample-apps/onboarding/linux">Linux</a></li><li class="last menu-mlid-2589 menu-item-2589"><a href="/developers/develop/run-sample-apps/onboarding/ios-osx">iOS/OS X</a></li></ul></li><li class="menu-parent menu-mlid-2590 menu-item-2590"><a href="/developers/develop/run-sample-apps/acserver">AC Server</a><ul class="menu clearfix"><li class="first menu-mlid-2591 menu-item-2591"><a href="/developers/develop/run-sample-apps/acserver/linux">Linux</a></li><li class="last menu-mlid-2592 menu-item-2592"><a href="/developers/develop/run-sample-apps/acserver/thin-linux">Thin - Linux</a></li></ul></li><li class="menu-parent menu-mlid-2593 menu-item-2593"><a href="/developers/develop/run-sample-apps/test">Command Line Apps</a><ul class="menu clearfix"><li class="first last menu-mlid-2594 menu-item-2594"><a href="/developers/develop/run-sample-apps/test/sessions">Sessions</a></li></ul></li><li class="last menu-mlid-2994 menu-item-2994"><a href="/developers/develop/run-sample-apps/alljoyn-js">AllJoyn.js</a></li></ul></li><li class="menu-parent active-trail menu-mlid-2595 menu-item-2595"><a href="/developers/develop/api-guide" class="active-trail">API Guide</a><ul class="menu clearfix"><li class="first menu-parent menu-mlid-2596 menu-item-2596"><a href="/developers/develop/api-guide/core">Core</a><ul class="menu clearfix"><li class="first menu-mlid-2939 menu-item-2939"><a href="/developers/develop/api-guide/core/java">java</a></li><li class="menu-mlid-2940 menu-item-2940"><a href="/developers/develop/api-guide/core/objc">Objective-C</a></li><li class="menu-mlid-2647 menu-item-2647"><a href="/developers/develop/api-guide/core/alljoyn-transports-best-practices">Alljoyn Transports Best Practices</a></li><li class="menu-mlid-2648 menu-item-2648"><a href="/developers/develop/api-guide/core/auto-ping">AutoPinger</a></li><li class="menu-mlid-2935 menu-item-2935"><a href="/developers/develop/api-guide/core/observer">Observer</a></li><li class="last menu-mlid-2936 menu-item-2936"><a href="/developers/develop/api-guide/core/propcache">Property Cache</a></li></ul></li><li class="menu-parent menu-mlid-2599 menu-item-2599"><a href="/developers/develop/api-guide/about">About</a><ul class="menu clearfix"><li class="first menu-mlid-2941 menu-item-2941"><a href="/developers/develop/api-guide/about/java">java</a></li><li class="menu-mlid-2942 menu-item-2942"><a href="/developers/develop/api-guide/about/cpp">C++</a></li><li class="menu-mlid-2943 menu-item-2943"><a href="/developers/develop/api-guide/about/objc">Objective-C</a></li><li class="menu-mlid-2944 menu-item-2944"><a href="/developers/develop/api-guide/about/c-thin">C (Thin Core)</a></li><li class="menu-mlid-2945 menu-item-2945"><a href="/developers/develop/api-guide/about/java-legacy">java Legacy</a></li><li class="menu-mlid-2946 menu-item-2946"><a href="/developers/develop/api-guide/about/cpp-legacy">C++ Legacy</a></li><li class="last menu-mlid-2947 menu-item-2947"><a href="/developers/develop/api-guide/about/objc-legacy">Objective-C Legacy</a></li></ul></li><li class="menu-parent menu-mlid-2604 menu-item-2604"><a href="/developers/develop/api-guide/onboarding">Onboarding</a><ul class="menu clearfix"><li class="first menu-mlid-2948 menu-item-2948"><a href="/developers/develop/api-guide/onboarding/java">java</a></li><li class="last menu-mlid-2949 menu-item-2949"><a href="/developers/develop/api-guide/onboarding/objc">Objective-C</a></li></ul></li><li class="menu-parent menu-mlid-2607 menu-item-2607"><a href="/developers/develop/api-guide/config">Configuration</a><ul class="menu clearfix"><li class="first menu-mlid-2950 menu-item-2950"><a href="/developers/develop/api-guide/config/java">java</a></li><li class="menu-mlid-2951 menu-item-2951"><a href="/developers/develop/api-guide/config/cpp">C++</a></li><li class="menu-mlid-2952 menu-item-2952"><a href="/developers/develop/api-guide/config/objc">Objective-C</a></li><li class="last menu-mlid-2953 menu-item-2953"><a href="/developers/develop/api-guide/config/c-thin">C (Thin Core)</a></li></ul></li><li class="menu-parent menu-mlid-2612 menu-item-2612"><a href="/developers/develop/api-guide/notification">Notification</a><ul class="menu clearfix"><li class="first menu-mlid-2954 menu-item-2954"><a href="/developers/develop/api-guide/notification/java">java</a></li><li class="menu-mlid-2955 menu-item-2955"><a href="/developers/develop/api-guide/notification/cpp">C++</a></li><li class="menu-mlid-2956 menu-item-2956"><a href="/developers/develop/api-guide/notification/objc">Objective-C</a></li><li class="last menu-mlid-2957 menu-item-2957"><a href="/developers/develop/api-guide/notification/c-thin">C (Thin Core)</a></li></ul></li><li class="menu-parent menu-mlid-2617 menu-item-2617"><a href="/developers/develop/api-guide/controlpanel">Control Panel</a><ul class="menu clearfix"><li class="first menu-mlid-2958 menu-item-2958"><a href="/developers/develop/api-guide/controlpanel/java">java</a></li><li class="menu-mlid-2959 menu-item-2959"><a href="/developers/develop/api-guide/controlpanel/cpp">C++</a></li><li class="menu-mlid-2960 menu-item-2960"><a href="/developers/develop/api-guide/controlpanel/objc">Objective-C</a></li><li class="last menu-mlid-2961 menu-item-2961"><a href="/developers/develop/api-guide/controlpanel/c-thin">C (Thin Core)</a></li></ul></li><li class="menu-parent active-trail menu-mlid-2622 menu-item-2622"><a href="/developers/develop/api-guide/audio-streaming" class="active-trail">Audio Streaming</a><ul class="menu clearfix"><li class="first last active-trail active menu-mlid-2962 menu-item-2962"><a href="/developers/develop/api-guide/audio-streaming/cpp" class="active-trail active">C++</a></li></ul></li><li class="last menu-mlid-2624 menu-item-2624"><a href="/developers/develop/api-guide/events-and-actions">Events and Actions</a></li></ul></li><li class="menu-mlid-2625 menu-item-2625"><a href="/developers/develop/api-reference">API Reference</a></li><li class="menu-parent menu-mlid-2626 menu-item-2626"><a href="/developers/develop/debug">Debug</a><ul class="menu clearfix"><li class="first last menu-mlid-2627 menu-item-2627"><a href="/developers/develop/debug/common-issues">Common Issues</a></li></ul></li><li class="menu-parent menu-mlid-2628 menu-item-2628"><a href="/developers/develop/tutorial">Tutorial</a><ul class="menu clearfix"><li class="first menu-mlid-2629 menu-item-2629"><a href="/developers/develop/tutorial/core">Core</a></li><li class="menu-mlid-2630 menu-item-2630"><a href="/developers/develop/tutorial/ios">iOS</a></li><li class="menu-mlid-2631 menu-item-2631"><a href="/developers/develop/tutorial/thin-app">Thin App</a></li><li class="menu-mlid-2632 menu-item-2632"><a href="/developers/develop/tutorial/arduino-and-gt202">Arduino + GT202</a></li><li class="last menu-mlid-2633 menu-item-2633"><a href="/developers/develop/tutorial/videos">Videos</a></li></ul></li><li class="last menu-parent menu-mlid-2634 menu-item-2634"><a href="/developers/develop/ask">Ask Forum</a></li></ul></div>
</div></div></div></div></div>            <div id="content-column" role="main">
        <div class="content-inner">

          
          <section id="main-content">

                                      <header id="main-content-header">

                                                  <h1 id="sub-title">
                    Audio API Usage Guide - C++                  </h1>
                
                
              </header>
                        
                          <div id="content">
                        <article id="node-4468" class="node node-developer-document article clearfix" about="/developers/develop/api-guide/audio-streaming/cpp" typeof="sioc:Item foaf:Document" role="article">

  
      <span property="dc:title" content="Audio API Usage Guide - C++" class="rdf-meta element-hidden"></span><span property="sioc:num_replies" content="0" datatype="xsd:integer" class="rdf-meta element-hidden"></span>
  
  <div class="node-content">
  
  <div class="field-body view-mode-full">
    
<h2 id="reference-code">Reference code</h2>
<p>The reference code consists of an application that implements
an audio sink and audio source.</p>
<p>Audio.h contains definitions that are common to both audio
sinks and sources.</p>
<h3 id="sink-classes">Sink classes</h3>
<table><thead><tr><th>Sink class</th>
<th>Description</th>
</tr></thead><tbody><tr><td>AudioSinkObject</td>
<td><p>Class that implements the following AllJoyn® interfaces:</p><ul><li>org.alljoyn.Stream.Port</li><li>org.alljoyn.Stream.Port.AudioSink</li><li>org.alljoyn.Control.Volume</li></ul></td>
</tr><tr><td>StreamObject</td>
<td><p>Class that implements the following AllJoyn interfaces:</p><ul><li>org.alljoyn.Stream</li><li>org.alljoyn.Stream.Clock</li></ul></td>
</tr><tr><td>AudioDevice</td>
<td>Abstract class for implementing access to an audio device/sound card.</td>
</tr><tr><td>ALSADevice</td>
<td>Subclass of AudioDevice that implements access to an audio device using the Audio Linux Sound Architecture (ALSA) API.</td>
</tr></tbody></table><h3 id="source-classes">Source classes</h3>
<table><thead><tr><th>Source class</th>
<th>Description</th>
</tr></thead><tbody><tr><td>SinkSearcher</td>
<td>Helper class for discovering AudioSinks.</td>
</tr><tr><td>SinkPlayer</td>
<td>Implements streaming of DataSources to an AudioSink.</td>
</tr><tr><td>DataSource</td>
<td>Abstract class for providing data to SinkPlayer for streaming.</td>
</tr><tr><td>WavDataSource</td>
<td>Subclass of DataSource that provides data from WAV files to SinkPlayer for streaming.</td>
</tr></tbody></table><h3 id="reference-c-application-code">Reference C++ application code</h3>
<table><thead><tr><th>Application class</th>
<th>Description</th>
</tr></thead><tbody><tr><td>SinkService</td>
<td>Command line application that receives and plays streamed audio by registering an instance of StreamObject on the AllJoyn bus.</td>
</tr><tr><td>SinkClient</td>
<td>Command line application that uses SinkSearcher to discover audio sinks and uses SinkPlayer to stream a WAV file to the sink.</td>
</tr></tbody></table><h2 id="compile-the-audio-service-framework">Compile the Audio service framework</h2>
<ol><li>Follow the steps in the <a href="/developers/develop/building/linux/build-source">Configuring the Build Environment (Linux Platform) section</a>.
Stop prior to the Building AllJoyn section.</li>
<li><p>Pull down the source code:</p>
<pre><code class="lang-sh"><code class="sh">$ repo init -u git clone git://git.allseenalliance/core/alljoyn.git</code>
</code></pre>
</li>
<li><p>Run SCons to compile the Audio service framework, test suite, and samples.</p>
<pre><code class="lang-sh"><code class="sh">$ cd services/audio</code>
</code></pre>
<ul><li><p>For 64-bit:</p>
<pre><code class="lang-sh"><code class="sh"> $ scons CPU=x86_64 ABOUT_BASE=$ALLJOYN_BASE/about/cpp</code>
</code></pre>
</li>
<li><p>For 32-bit:</p>
<pre><code class="lang-sh"><code class="sh"> $ scons ABOUT_BASE=$ALLJOYN_BASE/about/cpp</code>
</code></pre>
</li>
</ul><p>The build completes, and a build folder contains the compiled files.</p>
</li>
</ol><h2 id="build-a-sink">Build a Sink</h2>
<p>The following steps provide the high-level process to build a Sink.</p>
<ol><li>Create the base for the AllJoyn application.</li>
<li>Implement the AboutStore and use this with the AboutService API.
See the <a href="/developers/develop/api-guide/about">appropriate About API Guide</a> for the platform
you are targeting for instructions.</li>
<li>Implement the AudioDevice if the audio device/sound card
used by your platform is not supported.</li>
<li>Create and register a StreamObject.</li>
</ol><h2 id="build-a-source">Build a Source</h2>
<p>The following steps provide the high-level process to build a Source.</p>
<ol><li>Create the base for the AllJoyn application.</li>
<li>Create a class that extends SinkSearcher and SinkListener.</li>
<li>Create a new SinkPlayer and register the SinkListener.</li>
<li>Register the SinkSearcher.</li>
</ol><h2 id="setting-up-the-alljoyn-framework">Setting Up the AllJoyn Framework</h2>
<p>Every AllJoyn application requires a base set to be in place
before implementing specific features.</p>
<ul><li>Create BusAttachment</li>
<li>Connect to the AllJoyn framework</li>
</ul><h3 id="create-busattachment">Create BusAttachment</h3>
<p>To use the Audio service framework, an AllJoyn object called
the BusAttachment is needed that is used internally by the
service to leverage the AllJoyn API calls.</p>
<pre><code class="lang-cpp"><code class="cpp">BusAttachment* msgBus = new BusAttachment("SinkService", true);</code>
</code></pre>
<h3 id="start-and-connect-the-busattachment">Start and connect the BusAttachment</h3>
<p>Once created, the BusAttachment must be connected to the AllJoyn framework.</p>
<pre><code class="lang-cpp"><code class="cpp">QStatus status = msgBus-&gt;Start(); if( status == ER_OK ) {
status = msgBus-&gt;Connect(NULL);
}</code>
</code></pre>
<h2 id="implementing-a-sink">Implementing a Sink</h2>
<p>Implementing a Sink to receive streaming audio requires
creating and registering an instance of the StreamObject class.</p>
<p><strong>NOTE:</strong> Verify the BusAttachment has been created, started and
connected before implementing the Sink. See <a href="#setting-up-the-alljoyn-framework">Setting up the
AllJoyn Framework</a> for the code snippets.
Code in this section references a variable <code>msgBus</code> (the
BusAttachment variable name).</p>
<h3 id="declare-listener-class">Declare listener class</h3>
<p>Declare a listener class to receive the SessionPortListener callbacks.
Typically, an AcceptSessionJoiner callback in SessionPortListener
has a check to allow or disallow access. Since the Sink requires
access to everyone, return true when this callback is triggered.
Use the SessionJoined handler to set the session timeout to 20 seconds.</p>
<pre><code class="lang-cpp"><code class="cpp">class MyListener : public SessionPortListener {
   private:
      BusAttachment *mMsgBus;

   public:
      MyListener( BusAttachment *msgBus ) { mMsgBus = msgBus;
      }

      bool AcceptSessionJoiner( SessionPort sessionPort, const char* joiner,
const SessionOpts&amp; opts ) {

         printf("Accepting join session request from %s (opts.proximity=%x,
opts.traffic=%x, opts.transports=%x)\n",
            joiner, opts.proximity, opts.traffic, opts.transports);

         return true;
      }

      void SessionJoined( SessionPort sessionPort, SessionId id,
const char* joiner ) {
         printf("SessionJoined with %s (id=%d)\n", joiner, id);
         mMsgBus-&gt;EnableConcurrentCallbacks();
         uint32_t timeout = 20;
         QStatus status = mMsgBus-&gt;SetLinkTimeout(id, timeout);
         if( status == ER_OK ) {
            printf("Link timeout has been set to %ds\n", timeout);
         } else {
            printf("SetLinkTimeout(%d) failed\n", timeout);

         }
      }
};</code>
</code></pre>
<h3 id="use-the-aboutservice-api-to-announce-sink-details">Use the AboutService API to announce Sink details</h3>
<ol><li><p>Declare a PropertyStore class to advertise about properties.
The properties advertised should be customized for the device
the Sink is running on.</p>
<p><strong>NOTE:</strong> See the <a href="/developers/develop/api-guide/about">About API Guide</a> for the
platform you are targeting for required and optional properties
that the About feature can assign. The AppId field and other
values below are examples and should not be reused in commercial
products. See the <a href="/developers/develop/api-guide/about">About Best Practices</a> for
details on generating the AppId and other values.</p>
<pre><code class="lang-cpp"><code class="cpp">class AboutStore : public PropertyStore {
  public:
      AboutStore(const char* friendlyName)
         { struct utsname utsname; uname(&amp;utsname);
         mDeviceId = strdup(utsname.nodename);
         mFriendlyName = strdup(friendlyName);
      }
      ~AboutStore() {
         if (mDeviceId != NULL)
            free((void*)mDeviceId);
         if (mFriendlyName != NULL)
            free((void*)mFriendlyName);
      }
      QStatus ReadAll(const char* languageTag, PropertyStore::Filter
         filter, MsgArg&amp; all) {
         if (languageTag &amp;&amp; strcmp(languageTag, "en") != 0) { return ER_FAIL;
         }
         if (PropertyStore::WRITE == filter) {
            return ER_NOT_IMPLEMENTED;
         }

         size_t numProps = (PropertyStore::READ == filter) ? 11 : 7;
         MsgArg* props = new MsgArg[numProps];
         static const uint8_t appId[] = { 0x5a, 0x1e, 0xff, 0xf1, 0xf7,
            0x99, 0x4d, 0x22, 0x82, 0xc0, 0x93, 0x4d, 0x3c, 0x86, 0x16, 0xa6 };
            props[0].Set("{sv}", "AppId", new MsgArg("ay", 16, appId));
            props[1].Set("{sv}", "DefaultLanguage", new MsgArg("s", "en"));
            props[2].Set("{sv}", "DeviceName", new MsgArg("s", mFriendlyName));
            props[3].Set("{sv}", "DeviceId", new MsgArg("s", mDeviceId));
            props[4].Set("{sv}", "AppName", new MsgArg("s", "SinkService"));
            props[5].Set("{sv}", "Manufacturer", new MsgArg("s", "AllJoyn"));
            props[6].Set("{sv}", "ModelNumber", new MsgArg("s", "1"));
            if (PropertyStore::READ == filter) {
               static const char* supportedLanguages[] = { "en" };
               props[7].Set("{sv}", "SupportedLanguages", new MsgArg("as",
1, supportedLanguages));
               props[8].Set("{sv}", "Description", new MsgArg("s", "AllJoyn Audio Sink"));
               props[9].Set("{sv}", "SoftwareVersion", new MsgArg("s", "v0.0.1"));
               props[10].Set("{sv}", "AJSoftwareVersion", new MsgArg("s", ajn::GetVersion()));
            }

            all.Set("a{sv}", numProps, props);
            all.SetOwnershipFlags(MsgArg::OwnsArgs, true);
            return ER_OK;
      }
   private:
      const char* mDeviceId;
      const char* mFriendlyName;
   };</code>
</code></pre>
</li>
<li><p>Create an instance of the new AboutStore class to provide
to the StreamObject (see <a href="#create-and-register-streamobject">Create and register StreamObject</a>.)</p>
<pre><code class="lang-cpp"><code class="cpp">   const char *friendlyName = "Living Room";
   AboutStore* aboutProps = new AboutStore(friendlyName);</code>
</code></pre>
</li>
</ol><h3 id="bind-session-port">Bind session port</h3>
<p>To allow incoming connections, the formation of a session is needed.
The AllJoyn framework needs to be told that connections are allowed.</p>
<pre><code class="lang-cpp"><code class="cpp">MyListener* myListener = new MyListener(msgBus);
SessionOpts opts(SessionOpts::TRAFFIC_MESSAGES, false,
SessionOpts::PROXIMITY_ANY, TRANSPORT_ANY);
SessionPort sessionPort = SESSION_PORT_ANY;

if( status == ER_OK )
   status = msgBus-&gt;BindSessionPort(sessionPort, opts, *myListener);</code>
</code></pre>
<h3 id="create-an-audiodevice-object">Create an AudioDevice object</h3>
<p>Some platforms use different audio drivers. As such, there is an
abstraction layer called AudioDevice that must be implemented
for the platform driver. The current release supports the following platforms:</p>
<ul><li><p>Linux:</p>
<pre><code class="lang-cpp"><code class="cpp">AudioDevice* audioDevice = new ALSADevice();</code>
</code></pre>
</li>
<li><p>Android:</p>
<pre><code class="lang-java"><code class="java">AudioDevice* audioDevice = new AndroidDevice();</code>
</code></pre>
</li>
</ul><h3 id="create-and-register-streamobject">Create and register StreamObject</h3>
<p>StreamObject is an implementation wrapper around AllJoyn
native calls that handle the interactions between Sink and Source.</p>
<pre><code class="lang-cpp"><code class="cpp">StreamObject *streamObj = NULL; if( status == ER_OK ) {
   streamObj = new StreamObject(msgBus, "/Speaker/In", audioDevice,
      sessionPort, aboutProps);
   status = streamObj-&gt;Register();
   if (status != ER_OK)
      printf("Failed to register stream object (%s)\n",
         QCC_StatusText(status));
}</code>
</code></pre>
<h3 id="advertise">Advertise</h3>
<p>To accept connections, we need to advertise over the AllJoyn framework.
The unique name the AllJoyn framework provides is acceptable
for this purpose because the Audio service framework relies
on the AboutService API to distribute information about the device.</p>
<p><strong>NOTE:</strong> In most applications that use the AllJoyn framework and
do not use the About feature, a descriptive well-known name
is chosen to advertise.</p>
<pre><code class="lang-cpp"><code class="cpp">String name = msgBus-&gt;GetUniqueName();
if( status == ER_OK ) {
   status = msgBus-&gt;AdvertiseName(name.c_str(), opts.transports);
   if (status != ER_OK)
      printf("Failed to advertise name %s (%s)\n", name.c_str(),
         QCC_StatusText(status));
}</code>
</code></pre>
<h3 id="unregister-and-delete-streamobject">Unregister and delete StreamObject</h3>
<p>When your process is done with the Sink and no longer wishes
to receive audio input, unregister the process from the AllJoyn
bus and then delete the StreamObject instance.</p>
<pre><code class="lang-cpp"><code class="cpp">if( streamObj != NULL ) {
   streamObj-&gt;Unregister();
   delete streamObj;
   streamObj = NULL;
}
delete aboutProps;
aboutProps = NULL;
delete msgBus;


msgBus = NULL;
delete myListener;
myListener = NULL;</code>
</code></pre>
<h2 id="implementing-a-source">Implementing a Source</h2>
<p>To implement a Source to stream to a Sink, use the SinkSearcher
and SinkPlayer classes. By declaring a SinkSearcher subclass,
your application is notified when Sinks are found and lost.
When a Sink is found, you can add it to a SinkPlayer instance.
Verify the BusAttachment has been created, started and connected
before implementing an AudioSource. See <a href="#setting-up-the-alljoyn-framework">Setting up the AllJoyn Framework</a> for the code snippets. Code in this
section references a variable msgBus (the BusAttachment variable name).</p>
<h3 id="declare-sinksearcher-subclass">Declare SinkSearcher subclass</h3>
<p>To interact with different Sinks, the SinkPlayer subclass
provides an API containing AddSink and RemoveSink methods,
as well as check if they have already been added.
The following code snippet adds any new Sink that has not
already been added.</p>
<p><strong>NOTE:</strong> AddSink allows for audio to be played back on that device
once <code>SinkAdded</code> (from the SinkListener below) has been called.
After <code>SinkAdded</code> is called, call <code>OpenSink</code> on each Sink that
should receive audio. Play and Pause commands will affect all
opened Sinks. Refer to the API documentation for more details.</p>
<pre><code class="lang-cpp"><code class="cpp">static SinkPlayer *g_sinkPlayer = NULL;
class MySinkSearcher : public SinkSearcher {
   virtual void SinkFound( Service *sink ) {
      const char *name = sink-&gt;name.c_str();
      const char *path = sink-&gt;path.c_str();
      printf("Found %s objectPath=%s, sessionPort=%d\n", name, path,
         sink-&gt;port);
      if( !g_sinkPlayer-&gt;HasSink(name) )
         g_sinkPlayer-&gt;AddSink(name, sink-&gt;port, path);
   }

   virtual void SinkLost( Service *sink ) {
   const char *name = sink-&gt;name.c_str();
   printf("Lost %s\n", name);
   }
};</code>
</code></pre>
<h3 id="declare-sinklistener-subclass">Declare SinkListener subclass</h3>
<p>SinkPlayer methods such as AddSink and RemoveSink are asynchronous.
You can create and register a SinkListener to be notified when
these calls have completed. The SinkRemoved handler is also called
when a sink's session is lost.</p>
<pre><code class="lang-cpp"><code class="cpp">class MySinkListener : public SinkListener {
   void SinkAdded( const char *name ) {
      printf("SinkAdded: %s\n", name);

      g_sinkPlayer-&gt;OpenSink(name);
   }

   void SinkAddFailed( const char *name ) {
      printf("SinkAddFailed: %s\n", name);
   }

   void SinkRemoved( const char *name, bool lost ) {
      printf("SinkRemoved: %s lost=%d\n", name, lost);
   }

   void MuteChanged(const char* name, bool mute) {
      printf("MuteChanged: %s mute=%s\n", name, mute ? "on" : "off");
   }

   void VolumeChanged(const char* name, int16_t volume) {
      printf("VolumeChanged: %s volume=%d\n", name, volume);
   }
};</code>
</code></pre>
<h3 id="create-and-configure-sinkplayer">Create and configure SinkPlayer</h3>
<p>The SinkPlayer object is responsible for sending a supplied
DataSource over the AllJoyn framework to any open sinks.
The DataSource can be set any time prior to calling the
<code>OpenSink()</code> method.</p>
<pre><code class="lang-cpp"><code class="cpp">MySinkListener listener;
g_sinkPlayer = new SinkPlayer(msgBus);
g_sinkPlayer-&gt;AddListener(&amp;listener);</code>
</code></pre>
<h3 id="set-the-preferred-audio-data-format">Set the preferred audio data format</h3>
<p><code>SinkPlayer</code> lets you specify which format to use for streaming.
However, there is no guarantee that the format you specify
will be used. If a Sink does not support your preferred format,
<code>SinkPlayer</code> automatically defaults to raw audio.</p>
<p><strong>NOTE:</strong> This must be called prior to adding a Sink using <code>AddSink()</code>.</p>
<p>To support ALAC (Apple Lossless):</p>
<pre><code class="lang-cpp"><code class="cpp">g_sinkPlayer-&gt;SetPreferredFormat(MIMETYPE_AUDIO_ALAC);</code>
</code></pre>
<p>To support RAW audio support:</p>
<pre><code class="lang-cpp"><code class="cpp">g_sinkPlayer-&gt;SetPreferredFormat(MIMETYPE_AUDIO_RAW);</code>
</code></pre>
<h3 id="set-the-data-source">Set the data source</h3>
<p>To best support multiple audio file formats, a DataSource
class is created that represents how the audio file will be
decoded and read. Currently, support for WAV files is provided.
Adding support for other audio formats will require implementing
a new class derived from DataSource.
A .WAV file example follows.</p>
<pre><code class="lang-cpp"><code class="cpp">WavDataSource dataSource;
dataSource.Open("/path/to/file.wav"); // the WAV file to stream to the sink(s)
g_sinkPlayer-&gt;SetDataSource(&amp;dataSource);</code>
</code></pre>
<h3 id="create-and-register-sinksearcher">Create and register SinkSearcher</h3>
<p>Create an object of the class that is derived from SinkSearcher
from <a href="#declare-sinksearcher-subclass">Declare SinkSearcher subclass</a>
and register it with the BusAttachment.</p>
<pre><code class="lang-cpp"><code class="cpp">MySinkSearcher searcher;
status = searcher.Register(msgBus);</code>
</code></pre>
<h3 id="start-playback-once-a-sink-has-been-found">Start playback once a Sink has been found</h3>
<p>It is recommended that developers verify the number of connected
Sinks = 1 prior to calling the Play method to ensure audio will
be played remotely. The Play method will start audio on every
sink that OpenSink() has been called on.</p>
<pre><code class="lang-cpp"><code class="cpp">// Sleep until sink is found and then play. An alternative approach would be to
// call Play() in the SinkListener on the SinkAdded event.
while( g_sinkPlayer-&gt;GetSinkCount() &lt; 1 )
   usleep(100 * 1000);
g_sinkPlayer-&gt;Play();</code>
</code></pre>
<h3 id="unregister-sinksearcher-and-delete-sinkplayer">Unregister SinkSearcher and delete SinkPlayer</h3>
<p>Once you are done streaming, unregister the SinkSearcher,
remove any sinks that are still part of the SinkPlayer,
and then delete the SinkPlayer.</p>
<p><strong>NOTE:</strong> The SinkPlayer object must be deleted before the BusAttachment object.</p>
<pre><code class="lang-cpp"><code class="cpp">searcher.Unregister();
g_sinkPlayer-&gt;RemoveAllSinks();
// Wait for sinks to be removed
while( g_sinkPlayer-&gt;GetSinkCount() &gt; 0 )
   usleep(100 * 1000);
delete g_sinkPlayer;</code>
</code></pre>
<h2 id="implementing-an-audiodevice">Implementing an AudioDevice</h2>
<p>The reference code includes an AudioDevice subclass that uses
the ALSA API. If your target environment uses a different sound
card API, you must do the following:</p>
<ul><li>Implement a new AudioDevice subclass.</li>
<li><p>When creating a StreamObject create a new instance of the AudioDevice
and pass it into the StreamObject constructor. For example:</p>
<pre><code class="lang-cpp"><code class="cpp">audioDevice = new MyAudioDevice();
streamObj = new StreamObject(msgBus, "/Speaker/In", audioDevice,
sessionPort, aboutProps);</code>
</code></pre>
</li>
</ul><p>The following defines the AudioDevice methods your subclass must implement.</p>
<table><thead><tr><th>Method</th>
<th>Description</th>
</tr></thead><tbody><tr><td><code>Open()</code></td>
<td>Open and prepare the audio device for playback, and start playing as soon as it receives data.</td>
</tr><tr><td><code>Close()</code></td>
<td>Close audio device and free any resources.</td>
</tr><tr><td><code>Play()</code></td>
<td>Start audio device playback.</td>
</tr><tr><td><code>Pause()</code></td>
<td>Pause audio device playback.</td>
</tr><tr><td><code>Play()</code></td>
<td>Resume after a pause.</td>
</tr><tr><td><code>Recover()</code></td>
<td>Recover from underrun if one has occurred.</td>
</tr><tr><td><code>GetDelay()</code></td>
<td>Get audio device delay (time until new samples will be audible).</td>
</tr><tr><td><code>GetFramesWanted()</code></td>
<td>Get the number of frames the audio device wants.</td>
</tr><tr><td><code>Write()</code></td>
<td>Write samples to audio device.</td>
</tr><tr><td><code>GetMute()</code></td>
<td>Gets the audio device mute state.</td>
</tr><tr><td><code>SetMute()</code></td>
<td>Sets the audio device mute state.</td>
</tr><tr><td><code>GetVolumeRange()</code></td>
<td>Gets the audio device volume range.</td>
</tr><tr><td><code>GetVolume()</code></td>
<td>Gets the audio device volume.</td>
</tr><tr><td><code>SetVolume()</code></td>
<td>Set audio device volume and mute state.</td>
</tr><tr><td><code>AddListener()</code></td>
<td>Adds a listener for volume and mute events.</td>
</tr><tr><td><code>RemoveListener()</code></td>
<td>Removes a listener for volume and mute events.</td>
</tr></tbody></table><h3 id="example-open-implementation">Example <code>Open()</code> implementation</h3>
<pre><code class="lang-cpp"><code class="cpp">bool ALSADevice::Open( const char *format, uint32_t sampleRate,
uint32_t numChannels, uint32_t &amp;bufferSize ) {
   int err;
   if( mAudioDeviceHandle != NULL ) { fprintf(stderr, "Open: already open\n"); return false;
   }

   uint32_t bitsPerChannel;
   snd_pcm_format_t pcmFormat;

   if( strcmp(format, "s16le") == 0 ) {
      pcmFormat = SND_PCM_FORMAT_S16_LE; bitsPerChannel = 16;
   } else {
      fprintf(stderr, "Unsupported audio format: %s\n", format);
      return false;
   }

   if( (err = snd_pcm_open(&amp;mAudioDeviceHandle, "plughw:0,0",
SND_PCM_STREAM_PLAYBACK, 0)) &lt; 0 ) {
      fprintf(stderr, "cannot open audio device (%s)\n", snd_strerror(err));
      return false;
   }

   snd_pcm_hw_params_t *hw_params = NULL;
      if( (err = snd_pcm_hw_params_malloc(&amp;hw_params)) &lt; 0 ) {
         fprintf (stderr, "cannot allocate hardware parameter structure (%s)\n",
snd_strerror(err));
            snd_pcm_close(mAudioDeviceHandle);
            return false;
      }

#define AUDIO_CLEANUP() \
if( mAudioDeviceHandle != NULL ) { \
   snd_pcm_close(mAudioDeviceHandle); \
   mAudioDeviceHandle = NULL; \
} \
if( hw_params != NULL ) { \
   snd_pcm_hw_params_free(hw_params); \
   hw_params = NULL; \
}

   if( (err = snd_pcm_hw_params_any(mAudioDeviceHandle, hw_params)) &lt; 0 ) {
      fprintf(stderr, "cannot initialize hardware parameter structure (%s)\n",
snd_strerror(err));
      AUDIO_CLEANUP();
      return false;
   }

   if( (err = snd_pcm_hw_params_set_access(mAudioDeviceHandle, hw_params,
SND_PCM_ACCESS_RW_INTERLEAVED)) &lt; 0 ) {
   fprintf(stderr, "cannot set access type (%s)\n", snd_strerror(err));

   AUDIO_CLEANUP();
   return false;
}

if( (err = snd_pcm_hw_params_set_format(mAudioDeviceHandle, hw_params,
pcmFormat)) &lt; 0 ) {
   fprintf(stderr, "cannot set sample format (%s)\n", snd_strerror(err));
   AUDIO_CLEANUP();
   return false;
}

if( (err = snd_pcm_hw_params_set_rate_near(mAudioDeviceHandle, hw_params,
&amp;sampleRate, 0)) &lt; 0 ) {
   fprintf(stderr, "cannot set sample rate (%s)\n", snd_strerror(err));
   AUDIO_CLEANUP();
   return false;
}

if( (err = snd_pcm_hw_params_set_channels(mAudioDeviceHandle, hw_params,
numChannels)) &lt; 0 ) {
   fprintf(stderr, "cannot set channel count (%s)\n", snd_strerror(err));
   AUDIO_CLEANUP();
   return false;
}

uint32_t bytesPerFrame = (bitsPerChannel &gt;&gt; 3) * numChannels;
snd_pcm_uframes_t bs = 4096 * bytesPerFrame;
if( (err = snd_pcm_hw_params_set_buffer_size(mAudioDeviceHandle, hw_params,
bs)) &lt; 0 ) {
   fprintf(stderr, "snd_pcm_hw_params_set_buffer_size failed: %s\n",
   snd_strerror(err));
}

if( (err = snd_pcm_hw_params(mAudioDeviceHandle, hw_params)) &lt; 0 ) {
   fprintf(stderr, "cannot set parameters (%s)\n", snd_strerror(err));
   AUDIO_CLEANUP();
   return false;
}

snd_pcm_hw_params_get_buffer_size(hw_params, &amp;bs);
bufferSize = (uint32_t)bs;

mHardwareCanPause = snd_pcm_hw_params_can_pause(hw_params) == 1;
snd_pcm_hw_params_free(hw_params);

return true;
}</code>
</code></pre>
<h3 id="example-write-implementation">Example <code>Write()</code> implementation</h3>
<p>An important part of the write implementation is that the
call should be blocking until the write is complete.</p>
<p>The implementation of the audio driver presents the following options:</p>
<ul><li>If it's buffer-based, this method should block while waiting
for a buffer to free up.</li>
<li>In the case of ALSA, the snd_pcm_writei method is blocking.</li>
</ul><pre><code class="lang-cpp"><code class="cpp">bool ALSADevice::Write( const uint8_t *buffer, uint32_t bufferSizeInFrames ) {
   snd_pcm_sframes_t err = snd_pcm_writei(mAudioDeviceHandle, buffer,
bufferSizeInFrames);
   if( err &lt; 0 )
      err = snd_pcm_recover(mAudioDeviceHandle, err, 0);
   if( err &lt; 0 )
      fprintf(stderr, "write to audio interface failed (%s)\n",
snd_strerror(err));
   if( err &gt; 0 &amp;&amp; err != (snd_pcm_sframes_t)bufferSizeInFrames )
      fprintf(stderr, "short write (expected %u, wrote %li)\n",
bufferSizeInFrames, err);
   return err &gt; 0;
}</code>
</code></pre>
  </div>
  </div>

  
  
</article>
              </div>
                                   
          </section>

          
        </div>
      </div>


      
    </div>
  </div>
</div>
<div id="sticky-footer">
  
      <footer id="footer" class="clearfix" role="contentinfo">
        <div class="region region-footer"><div class="region-inner clearfix"><nav id="block-system-user-menu" class="block block-system block-menu"  role="navigation"><div class="block-inner clearfix">        <div class="block-content content"><ul class="menu clearfix"><li class="first menu-item-537"><a href="/user/register" title="">Register</a></li><li class="last menu-item-536"><a href="/user/login" title="">Log In</a></li></ul></div></div></nav></div></div>    </footer>
  
  <div id="lfcollabprojects-footer">
    <div class="gray-diagonal">
      <div class="footer-inner">
        <p>&copy; 2017 AllSeen Alliance, Inc. All Rights Reserved.</p>
        <p>The Linux Foundation® is a registered trademark of The Linux Foundation. AllSeen, Designed for AllSeen and AllSeen Alliance are trademarks of the AllSeen Alliance, Inc. AllJoyn® is a registered trademark of AllSeen Alliance, Inc.</p>
        <p>Linux is a registered <a href="http://www.linuxfoundation.org/programs/legal/trademark" title="Linux Mark Institute">trademark</a> of Linus Torvalds.</p>
        <p>Please see our <a href="/brand-guidelines">brand guidelines</a>, <a href="/trademarks">trademark guidelines</a>, <a href="/about/governance/ip-policy">IP policy</a>, <a href="/terms">terms of use</a>, <a href="/license">license</a>, and <a href="/privacy">privacy policy</a>.</p>
      </div>
    </div>
    <div id="body-bottom">
      </div>
</body>
</html>
